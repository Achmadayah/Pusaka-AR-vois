<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sigale Gale 3D</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer@^2.1.1/dist/model-viewer.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #8B4513, #D2691E);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .model-container {
            width: 100%;
            height: 450px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            --poster-color: transparent;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 15px;
            z-index: 10;
            border-radius: 15px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #FFD700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .model-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: linear-gradient(135deg, #8B4513, #D2691E);
            border: none;
            border-radius: 10px;
            padding: 12px 18px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            font-weight: 500;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .control-btn:hover {
            background: linear-gradient(135deg, #A0522D, #CD853F);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .model-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .model-btn {
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .model-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        .model-btn.active {
            background: #FFD700;
            color: #8B4513;
            border-color: #FFD700;
            font-weight: bold;
        }

        .object-title {
            font-size: 2.2rem;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #FFD700;
            font-weight: bold;
        }

        .object-description {
            line-height: 1.7;
            font-size: 1.15rem;
            text-align: center;
            margin-bottom: 25px;
            opacity: 0.95;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid #FFD700;
        }

        .audio-controls {
            display: flex;
            justify-content: center;
            margin-top: 25px;
        }

        .audio-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            border: none;
            color: #8B4513;
            font-size: 1.8rem;
            font-weight: bold;
        }

        .audio-btn:hover {
            background: linear-gradient(135deg, #FFA500, #FF8C00);
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }

        .audio-btn:active {
            transform: scale(0.95);
        }

        .cultural-badge {
            display: inline-block;
            background: linear-gradient(135deg, #8B4513, #D2691E);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .model-info {
            text-align: center;
            margin-bottom: 10px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .model-container {
                height: 350px;
            }
            
            .container {
                padding: 20px;
            }
            
            .model-controls, .model-selector {
                gap: 8px;
            }
            
            .control-btn, .model-btn {
                padding: 10px 14px;
                font-size: 0.85rem;
            }
            
            .object-title {
                font-size: 1.8rem;
            }
            
            .object-description {
                font-size: 1rem;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div style="text-align: center; margin-bottom: 15px;">
            <div class="cultural-badge">Warisan Budaya Batak</div>
        </div>
        
        <div class="model-info" id="model-info">
            Memuat Model High Resolution...
        </div>
        
        <div class="model-container">
            <div class="loading-overlay" id="loading-overlay">
                <div class="spinner"></div>
                <div>Memuat Model Sigale Gale...</div>
            </div>
            <model-viewer 
                id="model-viewer"
                src="./highres.glb"
                alt="Model 3D Sigale Gale"
                auto-rotate 
                camera-controls
                shadow-intensity="1.5"
                environment-image="neutral"
                camera-orbit="0deg 75deg 105%"
                exposure="1.5">
                
                <div slot="poster">
                    <div style="display: flex; justify-content: center; align-items: center; height: 100%; color: white;">
                        Model Sigale Gale 3D
                    </div>
                </div>
            </model-viewer>
        </div>

        <div class="model-selector">
            <button class="model-btn active" data-model="highres.glb">
                üéØ High Resolution
            </button>
            <button class="model-btn" data-model="textured.glb">
                üé® Textured Version
            </button>
        </div>
        
        <div class="model-controls">
            <button class="control-btn" id="reset-view">
                <span>‚Ü∫</span> Reset Posisi
            </button>
            <button class="control-btn" id="auto-rotate">
                <span>üîÑ</span> Putar Otomatis
            </button>
            <button class="control-btn" id="zoom-in">
                <span>üîç</span> Perbesar
            </button>
            <button class="control-btn" id="zoom-out">
                <span>üëÅÔ∏è</span> Perkecil
            </button>
        </div>
        
        <h2 class="object-title">Sigale Gale</h2>
        <p class="object-description">
            Sigale Gale adalah patung kayu tradisional dari suku Batak, Sumatra Utara, 
            yang dapat menari dan bergerak seperti manusia. Patung ini biasanya digunakan 
            dalam upacara adat untuk menghibur roh orang yang telah meninggal tanpa keturunan. 
            Sigale Gale memiliki tinggi sekitar 1,5 meter dan dihiasi pakaian tradisional Batak 
            dengan ukiran dan warna khas. Gerakan patung ini dikendalikan oleh tali-tali yang 
            dioperasikan oleh beberapa orang, menciptakan tarian yang menghibur dan penuh makna spiritual.
        </p>
        
        <div class="audio-controls">
            <button class="audio-btn" id="play-btn">‚ñ∂</button>
        </div>
    </div>

    <script>
       
        const playBtn = document.getElementById('play-btn');
        const modelViewer = document.getElementById('model-viewer');
        const resetViewBtn = document.getElementById('reset-view');
        const autoRotateBtn = document.getElementById('auto-rotate');
        const zoomInBtn = document.getElementById('zoom-in');
        const zoomOutBtn = document.getElementById('zoom-out');
        const loadingOverlay = document.getElementById('loading-overlay');
        const modelInfo = document.getElementById('model-info');
        const modelBtns = document.querySelectorAll('.model-btn');

        let currentAudio = null;
        let isPlaying = false;
        let isAutoRotating = true;
        let currentModel = 'highres.glb';

        
        function switchModel(modelFile) {
            loadingOverlay.style.display = 'flex';
            loadingOverlay.innerHTML = `
                <div class="spinner"></div>
                <div>Memuat ${modelFile === 'highres.glb' ? 'High Resolution' : 'Textured'} Model...</div>
            `;
            
            modelInfo.textContent = `Memuat ${modelFile === 'highres.glb' ? 'High Resolution' : 'Textured'} Model...`;
            
            
            modelViewer.src = `./${modelFile}`;
            currentModel = modelFile;
            
           
            modelBtns.forEach(btn => {
                if (btn.getAttribute('data-model') === modelFile) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

       
        modelBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                const modelFile = this.getAttribute('data-model');
                if (modelFile !== currentModel) {
                    switchModel(modelFile);
                }
            });
        });

        
        modelViewer.addEventListener('load', () => {
            console.log(`Model ${currentModel} berhasil dimuat`);
            loadingOverlay.style.display = 'none';
            modelInfo.textContent = `Model ${currentModel === 'highres.glb' ? 'High Resolution' : 'Textured'} berhasil dimuat`;
            
         
            modelViewer.exposure = 1.8;
            modelViewer.shadowIntensity = 1.8;
        });

        modelViewer.addEventListener('error', (event) => {
            console.error('Error loading model:', event);
            
            
            const alternativeModel = currentModel === 'highres.glb' ? 'textured.glb' : 'highres.glb';
            
            loadingOverlay.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 3rem; margin-bottom: 10px;">‚ö†Ô∏è</div>
                    <div>File ${currentModel} tidak ditemukan</div>
                    <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.8;">
                        Mencoba load model alternatif...
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                switchModel(alternativeModel);
            }, 2000);
        });

       
        function speakText(text) {
            if (currentAudio && isPlaying) {
                currentAudio.pause();
                isPlaying = false;
                playBtn.textContent = '‚ñ∂';
            }

            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'id-ID';
                utterance.rate = 0.8;
                utterance.pitch = 1;
                utterance.volume = 1;
                
                utterance.onstart = function() {
                    isPlaying = true;
                    playBtn.textContent = '‚è∏';
                    playBtn.style.background = 'linear-gradient(135deg, #FF8C00, #FF6347)';
                };
                
                utterance.onend = function() {
                    isPlaying = false;
                    playBtn.textContent = '‚ñ∂';
                    playBtn.style.background = 'linear-gradient(135deg, #FFD700, #FFA500)';
                    autoRotateBtn.innerHTML = '<span>üîÑ</span> Putar Otomatis';
                    modelViewer.autoRotate = false;
                    isAutoRotating = false;
                    resetView();
                };
                
                utterance.onerror = function() {
                    isPlaying = false;
                    playBtn.textContent = '‚ñ∂';
                    playBtn.style.background = 'linear-gradient(135deg, #FFD700, #FFA500)';
                };
                
                speechSynthesis.speak(utterance);
                currentAudio = utterance;
                
                modelViewer.autoRotate = true;
                isAutoRotating = true;
                autoRotateBtn.innerHTML = '<span>‚è∏</span> Berhenti';
                
            } else {
                const audio = new Audio("https://www.soundjay.com/button/beep-07.wav");
                audio.play();
                
                isPlaying = true;
                playBtn.textContent = '‚è∏';
                playBtn.style.background = 'linear-gradient(135deg, #FF8C00, #FF6347)';
                
                audio.onended = function() {
                    isPlaying = false;
                    playBtn.textContent = '‚ñ∂';
                    playBtn.style.background = 'linear-gradient(135deg, #FFD700, #FFA500)';
                };
                
                currentAudio = audio;
            }
        }

     
        function resetView() {
            modelViewer.cameraOrbit = "0deg 75deg 105%";
            modelViewer.autoRotate = false;
            isAutoRotating = false;
            autoRotateBtn.innerHTML = '<span>üîÑ</span> Putar Otomatis';
        }

     
        const voiceOverText = "Sigale Gale adalah patung kayu tradisional dari suku Batak, Sumatra Utara, yang dapat menari dan bergerak seperti manusia. Patung ini biasanya digunakan dalam upacara adat untuk menghibur roh orang yang telah meninggal tanpa keturunan. Sigale Gale memiliki tinggi sekitar 1,5 meter dan dihiasi pakaian tradisional Batak dengan ukiran dan warna khas. Gerakan patung ini dikendalikan oleh tali-tali yang dioperasikan oleh beberapa orang, menciptakan tarian yang menghibur dan penuh makna spiritual.";

       
        playBtn.addEventListener('click', function() {
            if (isPlaying) {
                if ('speechSynthesis' in window) {
                    speechSynthesis.cancel();
                } else if (currentAudio) {
                    currentAudio.pause();
                }
                isPlaying = false;
                playBtn.textContent = '‚ñ∂';
                playBtn.style.background = 'linear-gradient(135deg, #FFD700, #FFA500)';
                modelViewer.autoRotate = false;
                isAutoRotating = false;
                autoRotateBtn.innerHTML = '<span>üîÑ</span> Putar Otomatis';
            } else {
                speakText(voiceOverText);
            }
        });

        resetViewBtn.addEventListener('click', resetView);

        autoRotateBtn.addEventListener('click', function() {
            isAutoRotating = !isAutoRotating;
            modelViewer.autoRotate = isAutoRotating;
            autoRotateBtn.innerHTML = isAutoRotating ? '<span>‚è∏</span> Berhenti' : '<span>üîÑ</span> Putar Otomatis';
        });

        zoomInBtn.addEventListener('click', function() {
            const currentOrbit = modelViewer.getCameraOrbit();
            const currentDistance = parseFloat(currentOrbit.radius);
            const newDistance = Math.max(currentDistance * 0.7, 40);
            modelViewer.cameraOrbit = `${currentOrbit.theta}deg ${currentOrbit.phi}deg ${newDistance}%`;
        });

        zoomOutBtn.addEventListener('click', function() {
            const currentOrbit = modelViewer.getCameraOrbit();
            const currentDistance = parseFloat(currentOrbit.radius);
            const newDistance = Math.min(currentDistance * 1.3, 250);
            modelViewer.cameraOrbit = `${currentOrbit.theta}deg ${currentOrbit.phi}deg ${newDistance}%`;
        });

        
        setTimeout(() => {
            if (loadingOverlay.style.display !== 'none') {
                loadingOverlay.innerHTML = `
                    <div style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 10px;">‚è≥</div>
                        <div>Loading timeout</div>
                        <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.8;">
                            Pastikan file highres.glb dan textured.glb ada di folder yang sama
                        </div>
                    </div>
                `;
            }
        }, 10000);
    </script>
</body>
</html>
